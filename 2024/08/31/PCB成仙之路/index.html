<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="XIAODENGWANG">





<title>PCB成仙之路 | Hexo</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Xiaodengwang&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Xiaodengwang&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // 为 6 时展开所有
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // 这个值是由 tocbot 源码里定义的 scrollSmoothDuration 得来的
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">PCB成仙之路</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">XIAODENGWANG</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">August 31, 2024&nbsp;&nbsp;16:07:21</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/%E7%AD%91%E5%9F%BA/">筑基</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="画原理图"><a href="#画原理图" class="headerlink" title="画原理图"></a><strong>画原理图</strong></h1><p>绘制原理图大概有着以下步骤。</p>
<h3 id="调整画布、添加图纸"><a href="#调整画布、添加图纸" class="headerlink" title="调整画布、添加图纸"></a><strong>调整画布、添加图纸</strong></h3><ul>
<li>下载、注册、登录并打开立创 EDA，新建一个 STM32 核心板的 PCB 工程。</li>
<li>在 STM32 核心板的 PCB 工程中，新建一个 STM32 核心板原理图。</li>
<li>在原理图设计界面中，设置原理图设计规范。原理图网格大小和栅格尺寸均设置为 10 并将 “吸附” 功能始终打开，单击绘图工具栏中的 “图纸设置” 放置合适规格的图纸。别的设置基本上维持在默认即可。</li>
</ul>
<h3 id="寻找所需要的电子元器件"><a href="#寻找所需要的电子元器件" class="headerlink" title="寻找所需要的电子元器件"></a><strong>寻找所需要的电子元器件</strong></h3><p>在立创 EDA 的元件库中搜索原理图封装，或者在个人库中创建原理图封装。这里为了方便起见，所有的电子元器件我都在立创商城里面先找到 “C” 开头的元器件编号（例如下图中的线性稳压器 AMS1117-3.3 在立创商城的商品编号为 C6186，在元件库界面中可以看到非常丰富的信息：价格、库存、原理图、PCB 图、实物图等），然后将该元器件应用至原理图中。这里需要注意几个问题：</p>
<ul>
<li>元器件在符合当前设计要求的前提下，按销量排序，选择购买人数多的；</li>
<li>看库存，选择库存多的；</li>
<li>首选 “基础库”，再选 “扩展库”；</li>
<li>最后看价格，选择价格较低的。</li>
</ul>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091835713.png">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091835713.png</a></p>
<ul>
<li>在原理图中放置元件，如上图中的 “放置” 按钮。</li>
</ul>
<h3 id="接线并添加网络标号"><a href="#接线并添加网络标号" class="headerlink" title="接线并添加网络标号"></a><strong>接线并添加网络标号</strong></h3><p>连线。连线也需要注意几个问题：</p>
<ul>
<li>原理图中要将电源导线加粗，在 “导线” 面板中将线宽修改为 2；</li>
<li>要在合适的位置运用 “网络标签”，“网络标签” 实际上也是一个电气连接点，具有相同网格标签的导线表示它们是连接在一起的，使用网络标签可以避免电路中出现较长的连线；</li>
<li>在没有连接的接口需要使用 “非连接标志”，在接口上画 “×”；</li>
<li>适当美化原理图布局，比如分块划线、备注原理图部分电路图的作用。</li>
</ul>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091836804.png">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091836804.png</a></p>
<h3 id="检查原理图"><a href="#检查原理图" class="headerlink" title="检查原理图"></a><strong>检查原理图</strong></h3><p>检查 STM32 核心板原理图。单击左侧的 “设计管理器”，查看是否所有的元器件的每个针脚均有连接；核对自己原理图的元器件、接线是否和书上或者设计的一致。</p>
<h1 id="电路图转-PCB"><a href="#电路图转-PCB" class="headerlink" title="电路图转 PCB"></a><strong>电路图转 PCB</strong></h1><p>在原理图设计完之后，PCB 板子的设计流程相当于完成了大部分的设计工作，接下来就是将原理图转化成 PCB 图并进行一些设计和设置，最终形成一个完整的成品交付生产厂家进行加工生产。书中 STM32 核心板的 PCB 设计流程具体可以参考以下流程。</p>
<h3 id="原理图转-PCB"><a href="#原理图转-PCB" class="headerlink" title="原理图转 PCB"></a><strong>原理图转 PCB</strong></h3><p>在 PCB 工程中新建 STM32 核心板的 PCB 文件，将 STM32 核心板的原理图导入 PCB 文件中；或者点击菜单栏中的 “设计”-“原理图转 PCB” 亦可直接将刚才设计的原理图转化为 PCB。</p>
<p>在 PCB 设计环境中设置 PCB 的设计规则：</p>
<ul>
<li>线宽：当前规则的导线宽度。PCB 中的导线宽度不能小于规则线宽。默认设置为 10mil。</li>
<li>间距：当前规则的元素间距。PCB 中具有不同网络的两个元素之间的间距不能小于规则间距。默认设置为 8mil。</li>
<li>孔外径：当前规则的孔外径。PCB 中的孔外径不能小于规则孔外径，如通孔的外径说讯的外径、圆形多层焊盘的外径等，都要大于或等于规则孔外径。默认设置为 24mil。</li>
<li>孔内径：当前规则的孔内径。PCB 中的孔内径不能小于规则孔内径，如过孔的内径圆形多层焊盘的内径等，都要大于或等于规则孔内径。默认设置为 12mil。</li>
</ul>
<h3 id="PCB-元器件布局与布线"><a href="#PCB-元器件布局与布线" class="headerlink" title="PCB 元器件布局与布线"></a><strong>PCB 元器件布局与布线</strong></h3><p>设计 STM32 核心板的边框和定位孔，先在合适的位置画圆圈，然后选中该圆圈 - 右键 - 单击 “转为槽孔”，此时点击查看板子的 3D 预览图会发现板子上出现了打通的通孔。</p>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091838163.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091838163.jpg</a></p>
<p>对 PCB 上的元件进行布局与布线操作：</p>
<ul>
<li>选择布线工具或按快捷键 W，在画布上单击开始绘制，布线时要选择正确的层，铜箔层和非铜箔层都可用该布线工具绘制导线。</li>
<li>修改导线属性。比如加粗导线，修改导线颜色等。</li>
<li>切换布线活动层。在顶层绘制一段导线，单击确认布线，然后按 “B”，可以自动添加过孔，并切换到底层继续布线。按 “T” 可由底层切换至顶层。</li>
<li>调节导线线宽。在布线过程中，按 Tab 键修改线宽的参数。</li>
<li>切换布线角度。一般来说采用 45° 的布线角度。</li>
<li>布线冲突。在 PCB 设计过程中，需要打开布线冲突中的 “阻挡” 功能。这样在布线过程中，不同网络之间将不相连。</li>
<li>布线吸附。在布线过程中，需要打开 “吸附” 功能，这样布线时导线将自动吸附在焊盘的中心位置。</li>
</ul>
<p>其他需要注意的事项：</p>
<ul>
<li>由于在上一节的设计规则中已经设置过了 “线宽默认设置为 10mil”，而在实际 PCB 的电源部分需要使用更粗的线，例如在设计时需要临时将线宽加粗至 30mil 以上；</li>
<li>同一功能的相关元器件（例如 “JTAG 接口调试电路” 相关的元器件）需要放置在较近的位置；</li>
<li>在布线的过程中按 “B” 可以打个通孔将走线从 PCB 板的底层走过；按 “T” 可以打个通孔将走线回到 PCB 板的顶层；</li>
<li>PCB 布线不要距离定位孔和电路板边框太近；</li>
<li>同一层禁止 90° 拐角布线，不同层之间允许过孔 90° 布线。此外，布线时尽可能遵守一层水平布线、另一层垂直布线的原则；</li>
<li>高频信号线，如 STM32 核心板上晶振电路的布线，不要加粗。将线宽设置为 10mil，且尽可能布线在同一层。</li>
</ul>
<p>导线上能够承载的电流大小取决于线宽、线厚及容许温升。在 25 摄氏度，对于铜厚为 35um 的导线，10mil (0.25mm) 线宽能够承载 0.65A 电流，40mil (1mm) 线宽能够承载 2.3A 电流，80mil (2mm) 线宽能够承载 4A 电流。温度越高，导线能够承载的电流越小。</p>
<p>在 PCB 设计和打样中，常用 OZ (盎司) 作为铜皮厚度的单位，1OZ 铜定义为 1 平方英寸面积内铜箔的重量为 1 盎司，对应的物理厚度为 35um。PCB 打样厂最多的板材规格为 1OZ 铜厚。</p>
<h1 id="其他操作"><a href="#其他操作" class="headerlink" title="其他操作"></a><strong>其他操作</strong></h1><h3 id="丝印"><a href="#丝印" class="headerlink" title="丝印"></a><strong>丝印</strong></h3><p>在 PCB 的正面，会有一些默认的元器件标号和元器件摆放位置的框作为丝印层的一部分，而其他的文字或者图案需要在这一步添加。</p>
<p>在元器件排布和排线的时候，还得意洋洋觉得自己画的这块板子高度比书上的要短上一截，宽度似乎也要小一点点。但是在放丝印这一步中就碰到了一些小问题，由于挤得都是元器件，照抄书中的丝印是没戏了，只能将丝印放在了背面。</p>
<p>选中 “底层丝印层”，即可在背面的丝印层添加丝印，注意在背面添加的丝印层是镜像预览，实际效果可以在 3D 预览视图中查看。如下图所示：</p>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091839998.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091839998.jpg</a></p>
<p>如果要在 PCB 的正面添加丝印，则可以选择激活 “顶层丝印层”，即可以在 PCB 的正面添加任意想要添加的文字或者图案。使用 “文字” 工具可以添加文字，使用 “排线” 按钮可以绘制一些简单的框型。如下图所示：</p>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091840883.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091840883.jpg</a></p>
<h3 id="泪滴"><a href="#泪滴" class="headerlink" title="泪滴"></a><strong>泪滴</strong></h3><p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091840121.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091840121.jpg</a></p>
<h3 id="铺铜"><a href="#铺铜" class="headerlink" title="铺铜"></a><strong>铺铜</strong></h3><p>点击 “PCB 工具” 中的铺铜按钮，在板子想要铺铜的区域画出一个框，而这个框一般就是之前最后需要连接的 GND，所有铺铜覆盖的地方都是 GND。</p>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091841713.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091841713.jpg</a></p>
<p>铺完铜之后，可以检查以下 DRC，看一下是否有没有连接起来的 GND，如果有类似没有连起来的区域，那需要将这块区域重新调整，将该区域的 GND 与其他区域的 GND 铺铜覆盖区域相连接。</p>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091841655.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091841655.jpg</a></p>
<h3 id="DRC-规则检查"><a href="#DRC-规则检查" class="headerlink" title="DRC 规则检查"></a><strong>DRC 规则检查</strong></h3><h1 id="下单加工"><a href="#下单加工" class="headerlink" title="下单加工"></a><strong>下单加工</strong></h1><p>之前记得嘉立创每月有免费打样的活动，不过我第一次使用（至少在 2023 年 1 月下单时）时却发现最少需要收费 20 元，5 块板子包邮到家或者是 10 块板子不包邮。这个价格感觉成本还算是比较低的，不过订完板子之后还得购买板子上的电子元器件，这是一笔比打样板子贵得多的必要成本。</p>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091842243.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091842243.jpg</a></p>
<p>!<a target="_blank" rel="noopener" href="https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091843912.jpg">https://xdshcn-1258032613.cos.ap-shanghai.myqcloud.com/markdown/202301091843912.jpg</a></p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>XIAODENGWANG</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://example.com/2024/08/31/PCB%E6%88%90%E4%BB%99%E4%B9%8B%E8%B7%AF/">http://example.com/2024/08/31/PCB%E6%88%90%E4%BB%99%E4%B9%8B%E8%B7%AF/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY</strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/%E7%94%B5%E5%AD%90%E8%AE%BE%E8%AE%A1/"># 电子设计</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2024/08/31/TIM%E6%88%90%E4%BB%99%E4%B9%8B%E8%B7%AF%20/">TIM成仙之路</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>© XIAODENGWANG | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>